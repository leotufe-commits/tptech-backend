generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

/**
 * =========================
 * ENUMS
 * =========================
 *
 * (Opcional) Podés dejarlo si querés usarlo más adelante,
 * pero ahora NO lo usamos para evitar mismatch con la DB.
 */

// enum UserStatus {
//   ACTIVE
//   PENDING
//   BLOCKED
// }

/**
 * =========================
 * JOYERÍA (EMPRESA)
 * =========================
 */

model Jewelry {
  id           String @id @default(cuid())
  name         String
  firstName    String
  lastName     String
  phoneCountry String
  phoneNumber  String
  street       String
  number       String
  city         String
  province     String
  postalCode   String
  country      String

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  users User[]
}

/**
 * =========================
 * USUARIOS
 * =========================
 */

model User {
  id       String  @id @default(cuid())
  email    String  @unique
  password String
  name     String?

  // ✅ Ahora matchea con Postgres (TEXT)
  status   String  @default("ACTIVE")

  jewelryId String

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  jewelry Jewelry @relation(fields: [jewelryId], references: [id], onDelete: Cascade)

  @@index([jewelryId])
}
